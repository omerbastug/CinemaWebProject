<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <script src="js/jquery-3.6.0.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/playsService.js"></script>
    
</head>
<body>
    <header class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow">
        <a class="navbar-brand col-md-3 col-lg-2 me-0 px-3" href="#">Threater Project</a>
        <!-- <button class="navbar-toggler position-absolute d-md-none collapsed" type="button" playdata-bs-toggle="collapse" playdata-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <input class="form-control form-control-dark w-100" type="text" placeholder="Search" aria-label="Search"> -->
        <div class="navbar-nav">
          <div class="nav-item text-nowrap">
            <a class="nav-link px-3" href="#" onclick="loginService.logout()">Sign out</a>
          </div>
        </div>
    </header>
    <div id="session_info">
      
    </div>
    <script>
        let id = getQuerystring("id");
        let sess_date = getQuerystring("sess_date");
        sess_date = sess_date.replace("%20", " ");
        let theatre_id = getQuerystring("t_id");
        let playdata = PlayService.info(id);
        console.log(playdata);
        var html = `
                <section class="py-5">
                    <div class="container px-4 px-lg-5 my-5">
                        <div class="row gx-4 gx-lg-5 align-items-center" >
                            <div class="col-md-6"><img class="card-img-top mb-5 mb-md-0" src="https://picsum.photos/600/700" alt="play image"></div>
                            <div class="col-md-6">
                                <div class="small mb-1">Session date: ${sess_date}</div>
                                <h1 class="display-5 fw-bolder">${playdata.name}</h1>
                                <div class="fs-5 mb-5">
                                    <span>Author: ${playdata.author}</span>
                                </div>
                                <p class="lead">  ${playdata.description}</p>
                                <div class="d-flex">
                                    <button class="btn btn-outline-dark flex-shrink-0" type="button">
                                        <i class="bi-cart-fill me-1"></i>
                                        Show seats
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>     
                </section>`;
          $("#session_info").html(html);
        // var html = `<div class="col-md-6"><img class="card-img-top mb-5 mb-md-0" src="https://picsum.photos/600/700" alt="play image"></div>
        //               <div class="col-md-6">
        //                 <div class="small mb-1">Session id : ${sess_id}</div>
        //                 <h1 class="display-5 fw-bolder">${info.name}</h1>
        //                 <div class="fs-5 mb-5">
        //                   <span>${play.author}</span>
        //                 </div>
        //                 <p class="lead">${play.asd} 
        //                   Lorem ipsum dolor sit amet consectetur adipisicing elit. Praesentium at dolorem quidem modi. Nam sequi consequatur obcaecati excepturi alias magni, accusamus eius blanditiis delectus ipsam minima ea iste laborum vero?</p>
        //                 <div class="d-flex">
        //                   <button class="btn btn-outline-dark flex-shrink-0" type="button">
        //                     <i class="bi-cart-fill me-1"></i>
        //                     Show Seats
        //                   </button>
        //                 </div>
        //               </div>
        //             </div>`;
        //   $("#session_info").html(html);
          // <div style="display : inline-block;" class="top">
          //   <img src="https://picsum.photos/600/700" class="img-fluid" alt="random image">
          //   <div class="play-name">${info.name}</div>
          //   <div class="play-author">${info.author}</div>
          //   <div class="play-description">${info.asd}</div>
          //   <div class="play-duration">${info.durationMinutes}</div>
          //   <button type="button" class="btn btn-light" onclick="PlayService.showSeats(${theatre_id},${sess_id})">Show Seats</button>
          // </div>
      
        // html += `<div style="display : inline-block;">`;
        // jwttokennn = localStorage.getItem('token');
        // let sold;
        // $.ajax({
        //     async: false,
        //     url: `rest/get/ticketsbysess/${sess_id}`,
        //     type: "GET",
        //     beforeSend: function(xhr){
        //     xhr.setRequestHeader('Authorization', jwttokennn);
        //     },
        //     success: function(playdata){
        //         sold = playdata;
        //     },
        //     error: function(XMLHttpRequest, textStatus, errorThrown) {
        //     toastr.error(XMLHttpRequest.responseJSON.message);
        //     loginService.logout();
        //     }
        // });
        // $.ajax({
        //     async: false,
        //     url: `rest/get/theatre/${theatre_id}`,
        //     type: "GET",
        //     beforeSend: function(xhr){xhr.setRequestHeader('Authorization', jwttokennn);},
        //     success: function(playdata){
        //         for(let i = 0; i < playdata.numberofrows; i++){
        //             html += `<p style="diplay: inline-block;"> ${i+1}</p>`
        //             for(let j = 0; j < playdata.numberofcolumn;j++){
        //                 var hasMatch =false;
        //                 for (var index = 0; index < sold.length; ++index) {
        //                     var item = sold[index];
        //                     if(item.seat == i+","+j){
        //                     hasMatch = true;
        //                     break;
        //                     }
        //                 }
        //                 if(hasMatch){
        //                     html+= `<button disabled style="diplay: inline-block; margin: 5px;" type="button" class="btn btn-danger" onclick="SelectSeat(${i},${j},${sess_id})">${j+1}</button>`;
        //                 } else {
        //                     html+= `<button style="diplay: inline-block; margin: 5px;" type="button" class="btn btn-primary" onclick="SelectSeat(${i},${j},${sess_id})">${j+1}</button>`;
        //                 }
        //             }
        //             html += `<br>`;
        //         }
        //         html += "</div>";
        //         //$("#session_info").html(html);
        //     },
        //     error: function(XMLHttpRequest, textStatus, errorThrown) {
        //     toastr.error(XMLHttpRequest.responseJSON.message);
        //     loginService.logout();
        //     }
        // });
      </script>
      
</body>

<!-- Seats Modal -->
<div class="modal fade" id="seatModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Select a Seat</h5>
        <button type="button" class="btn-close" playdata-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" playdata-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>      
</html>